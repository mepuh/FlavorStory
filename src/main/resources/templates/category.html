<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <title th:text="${category.name}">FlavorStory - Category</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" />
    <link rel="stylesheet" href="/css/site.css" th:href="@{/css/site.css}" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<!--Category page showing recipes in the selected category-->

<body>
    <div th:replace="fragments :: header"></div>
    <main class="container my-5">
        <div class="main-card">
            <div class="d-flex justify-content-between align-items-center">
                <h2 th:text="${category.name}">Category Name</h2>
                <a class="btn btn-outline-secondary" th:href="@{/categories}" th:text="#{category.backTo}">Back to Categories</a>
            </div>
            <hr />
            <div th:if="${#lists.isEmpty(recipes)}" class="alert alert-brand">
                <span th:text="#{no.recipesFound}">No recipes found in this category yet.</span>
                <span sec:authorize="isAuthenticated()"> 
                    <span th:text="#{be.first}">Be the first to</span>
                    <a class="brand-link" th:href="@{/recipes/new}" th:text="#{add.recipe}">add a recipe</a>!
                </span>
            </div>
            <div th:if="${!#lists.isEmpty(recipes)}" class="list-group">
                <a th:each="recipe : ${recipes}" th:href="@{/recipes/{id}(id=${recipe.recipeId})}"
                    class="list-group-item list-group-item-action">
                    <strong th:text="${recipe.title}">Recipe</strong>
                    <div class="small-muted" th:text="${recipe.preparationTime}">Time</div>
                </a>
            </div>
        </div>
    </main>
    <div th:replace="fragments :: footer"></div>
</body>

</html>